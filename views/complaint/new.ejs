<% layout('layouts/userBP')%>
<header class="mb-auto mt-3">
  <div>
      <nav class="nav nav-masthead justify-content-evenly float-md-right">
        <div class="d-flex">
          <a class="nav-link" href="/">Home</a>
          <a class="nav-link active" href="/complaint/new">New Complaint</a>
        </div>      
        <div class="d-flex">
            <% if(!currentUser) {%>
              <a class="nav-link" href="/userLogin">Login</a>
              <a class="nav-link" href="/userReg">Register</a>
            <% } else {%>
              <a class="nav-link" href="/userLogout">Logout</a>
            <% } %>
        </div>
      </nav>
  </div>
  <%- include('../partials/flash')%>
</header>
<main class="container mt-5 mb-5">
<div class="container d-flex flex-column justify-content-center box-color p-5 ml-1 rounded-3">
  <h1 class="text-center">New Complaints</h1>
  <div class="">
    <form action="" method="POST">
      <button class="btn btn-success" id="sort">Sort</button>
    </form>
    <a href=""></a>
    <% if (complaints.length === 0) { %>
      <p>No complaints at the moment.</p>
    <% } else { %>
      <div class="list-group">
        <% for (let complaint of complaints) { %>
          <a href="/complaint/<%= complaint._id %>" class="list-group-item list-group-item-action d-flex justify-content-between align-items-start">
            <div class="ms-2 me-auto">
              <div class="fw-bold"><%= complaint.title %></div>
            </div>
            <span class="badge bg-secondary rounded-pill">Open</span>
          </a>
        <% } %>
      </div>
    <% } %>
  </div>
</div>
</main>

<script>
    (() => {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  const forms = document.querySelectorAll('.validated-form')

  // Loop over them and prevent submission
  Array.from(forms)
        .forEach(function (form) {
          form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
            }

          form.classList.add('was-validated')
      }, false)
   })
})()
</script>




    
